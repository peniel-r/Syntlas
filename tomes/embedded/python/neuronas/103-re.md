---
id: "python.stdlib.re"
title: "Regular Expressions"
category: stdlib
difficulty: intermediate
tags: [python, regex, re, pattern-matching]
keywords: [re.search, re.match, re.findall, re.sub]
use_cases: [text validation, string parsing, data extraction]
prerequisites: ["python.basics.strings"]
related: ["py.io.files"]
next_topics: []
---

# Regular Expressions

The `re` module provides regular expression operations.

## Basic Matching

```python
import re

text = "Hello, World! 123"

# search() - find first match
match = re.search(r"\d+", text)
print(match.group())  # 123

# match() - match at beginning
match = re.match(r"Hello", text)
print(match.group())  # Hello

# fullmatch() - match entire string
match = re.fullmatch(r"Hello, World! \d+", text)
print(match.group())  # Hello, World! 123
```

## Finding All Matches

```python
import re

text = "abc123def456ghi789"

# findall() - return all matches
numbers = re.findall(r"\d+", text)
print(numbers)  # ['123', '456', '789']

# finditer() - return iterator
for match in re.finditer(r"\d+", text):
    print(f"Found: {match.group()} at {match.start()}")
```

## Patterns

```python
import re

# Literal
re.search(r"hello", "hello world")

# Character class [abc]
re.search(r"[aeiou]", "hello")  # Matches any vowel

# Ranges [a-z]
re.search(r"[a-z]", "abc")  # Matches any lowercase letter
# Negated [^0-9]
re.search(r"[^0-9]", "abc123")  # Matches non-digit

# Wildcard .
re.search(r"a.b", "axb", "a1b", "a!b")  # . matches any char

# Quantifiers
re.search(r"a{3}", "aaab")        # Exactly 3 'a's
re.search(r"a{2,4}", "aaaab")     # 2-4 'a's
re.search(r"a*", "b")              # 0+ 'a's
re.search(r"a+", "baaa")           # 1+ 'a's
re.search(r"a?", "ba")             # 0-1 'a's

# Anchors
re.search(r"^Hello", "Hello World")  # Start of string
re.search(r"World$", "Hello World")  # End of string

# Groups (...)
re.search(r"(ab)+", "ababab")    # 'ab' repeated
```

## Substitution

```python
import re

text = "Hello, World! 123"

# Simple replacement
cleaned = re.sub(r"\d+", "", text)
# Hello, World!

# With backreference
html = "<h1>Title</h1>"
text = re.sub(r"<(h\d)>(.+?)</\1>", r"\1: \2", html)
# h1: Title

# Using function
def uppercase(match):
    return match.group().upper()

text = re.sub(r"[a-z]+", uppercase, "hello world")
# HELLO WORLD
```

## Groups and Capturing

```python
import re

text = "John Doe, age: 30"

# Named groups
pattern = r"(?P<name>\w+) \w+, age: (?P<age>\d+)"
match = re.search(pattern, text)

print(match.group("name"))  # John
print(match.group("age"))   # 30
print(match.groupdict())    # {'name': 'John', 'age': '30'}
```

## Compiling Patterns

```python
import re

# Compile once for reuse
email_pattern = re.compile(r"[\w.+-]+@[\w.-]+\.\w+")

text = "Contact: alice@example.com or bob@test.org"

emails = email_pattern.findall(text)
# ['alice@example.com', 'bob@test.org']
```

## Flags

```python
import re

# re.IGNORECASE - case-insensitive
re.search(r"hello", "HELLO", re.IGNORECASE)

# re.MULTILINE - ^ and $ match each line
text = """Line 1
Line 2
Line 3"""
lines = re.findall(r"^Line", text, re.MULTILINE)
# ['Line', 'Line', 'Line']

# re.DOTALL - . matches newline
re.search(r"a.*b", "a\n\nb", re.DOTALL)

# re.VERBOSE - allow comments in pattern
pattern = r"""
    \w+      # Word
    \s*       # Optional whitespace
    \d+       # Digits
"""
re.search(pattern, "hello 123", re.VERBOSE)
```

## Common Use Cases

### Email validation
```python
import re

email_pattern = r"^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$"

def is_valid_email(email):
    return re.match(email_pattern, email) is not None

is_valid_email("alice@example.com")  # True
is_valid_email("invalid")           # False
```

### Phone number extraction
```python
import re

text = "Call me at 555-123-4567 or 555.987.6543"

# US phone number pattern
phone_pattern = r"\d{3}[-.]\d{3}[-.]\d{4}"
phones = re.findall(phone_pattern, text)
# ['555-123-4567', '555.987.6543']
```

### URL extraction
```python
import re

text = "Visit https://example.com or http://test.org"

url_pattern = r"https?://(?:[-\w.]|(?:%[0-9a-fA-F]{2})+"
urls = re.findall(url_pattern, text)
# ['https://example.com', 'http://test.org']
```

### Remove HTML tags
```python
import re

html = "<p>Hello <b>World</b>!</p>"
clean = re.sub(r"<[^>]+>", "", html)
# Hello World!
```

### Split on multiple delimiters
```python
import re

data = "apple,banana;cherry|grape"

# Split on comma, semicolon, or pipe
items = re.split(r"[,;|]", data)
# ['apple', 'banana', 'cherry', 'grape']
```

### Extract code blocks
```python
import re

text = """
```python
def hello():
    print("Hello")
```
```

code_pattern = r"```(\w+)\n(.*?)```"
matches = re.findall(code_pattern, text, re.DOTALL)
# [('python', 'def hello():\n    print("Hello")')]
```

## Performance Tips

```python
import re

# Compile patterns used multiple times
pattern = re.compile(r"\d+")

# BAD: recompiling every time
for _ in range(1000):
    re.search(r"\d+", "text123")

# GOOD: compile once
for _ in range(1000):
    pattern.search("text123")

# Use non-capturing groups (?:...) when possible
# BAD: Creates unnecessary groups
re.search(r"(a|b|c)", text)

# GOOD: Non-capturing
re.search(r"(?:a|b|c)", text)
```

> **Tip**: Use [regex101.com](https://regex101.com) to test and debug regex patterns interactively.
